# NotaSpace Android

Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è NotaSpace - —Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ –∞–Ω–∞–ª–æ–≥–∞ Notion.

## –û–ø–∏—Å–∞–Ω–∏–µ

–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è Android, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –Ω–∞ Kotlin —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Jetpack Compose. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç REST API –∏–∑ –≤–µ–±-–≤–µ—Ä—Å–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **–Ø–∑—ã–∫**: Kotlin
- **UI Framework**: Jetpack Compose
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è Android**: API 26 (Android 8.0)
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: MVVM (Model-View-ViewModel)
- **Dependency Injection**: Hilt
- **–°–µ—Ç–µ–≤–æ–π —Å–ª–æ–π**: Retrofit + OkHttp
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å**: Kotlin Coroutines + Flow
- **–ù–∞–≤–∏–≥–∞—Ü–∏—è**: Navigation Component –¥–ª—è Compose
- **–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**: DataStore (–¥–ª—è —Ç–æ–∫–µ–Ω–æ–≤)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
app/src/main/java/ru/notaspace/
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ models/          # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ repository/      # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ local/           # –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (DataStore)
‚îÇ   ‚îî‚îÄ‚îÄ remote/          # –°–µ—Ç–µ–≤–æ–π —Å–ª–æ–π (Retrofit, API)
‚îú‚îÄ‚îÄ domain/              # Domain —Å–ª–æ–π (–¥–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è)
‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îú‚îÄ‚îÄ theme/           # –¢–µ–º–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ components/      # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ views/           # –≠–∫—Ä–∞–Ω—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/        # –≠–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ home/        # –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω —Å —Ç–∞–±–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/       # –≠–∫—Ä–∞–Ω —Å—Ç—Ä–∞–Ω–∏—Ü
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tasks/       # –≠–∫—Ä–∞–Ω –∑–∞–¥–∞—á
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ profile/     # –≠–∫—Ä–∞–Ω –ø—Ä–æ—Ñ–∏–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ viewmodel/       # ViewModels
‚îÇ   ‚îî‚îÄ‚îÄ navigation/      # –ù–∞–≤–∏–≥–∞—Ü–∏—è
‚îú‚îÄ‚îÄ di/                  # Dependency Injection –º–æ–¥—É–ª–∏
‚îî‚îÄ‚îÄ util/                # –£—Ç–∏–ª–∏—Ç—ã
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Android Studio Hedgehog (2023.1.1) –∏–ª–∏ –Ω–æ–≤–µ–µ
- JDK 17
- Android SDK (API 26+)
- Gradle 8.2+

### –®–∞–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Android Studio:
   ```bash
   cd mobile/android
   # –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–ø–∫—É –≤ Android Studio
   ```

2. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ Gradle:
   - Android Studio –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
   - –ò–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ: `File ‚Üí Sync Project with Gradle Files`

3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ API endpoint (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
   - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è Debug –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `http://10.0.2.2:85/api` (—ç–º—É–ª—è—Ç–æ—Ä)
   - –î–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∑–∞–º–µ–Ω–∏—Ç–µ –≤ `app/build.gradle`:
     ```gradle
     buildConfigField "String", "API_BASE_URL", '"http://192.168.1.XXX:85/api"'
     ```
   - –î–ª—è Production –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `https://notaspace.ru/api`

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
   - –í—ã–±–µ—Ä–∏—Ç–µ —ç–º—É–ª—è—Ç–æ—Ä –∏–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
   - –ù–∞–∂–º–∏—Ç–µ `Run` –∏–ª–∏ `Shift+F10`

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### API Base URL

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
- **Development (Debug)**: `http://10.0.2.2:85/api` (–¥–ª—è —ç–º—É–ª—è—Ç–æ—Ä–∞)
- **Production (Release)**: `https://notaspace.ru/api`

–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç–∫—Ä–æ–π—Ç–µ `app/build.gradle` –∏ –∏–∑–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ `API_BASE_URL` –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º `buildType`.

### Network Security Config

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å HTTP –≤ Debug —Ä–µ–∂–∏–º–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω `usesCleartextTraffic="true"` –≤ –º–∞–Ω–∏—Ñ–µ—Å—Ç–µ. –î–ª—è Production —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç HTTPS.

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

- ‚úÖ –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (MVVM + Jetpack Compose)
- ‚úÖ –°–µ—Ç–µ–≤–æ–π —Å–ª–æ–π (Retrofit —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫)
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–≤—Ö–æ–¥, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –≤—ã—Ö–æ–¥)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –≤ DataStore
- ‚úÖ –ë–∞–∑–æ–≤—ã–π UI (—ç–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞, –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω —Å —Ç–∞–±–∞–º–∏)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ Material Design 3)
- ‚úÖ Dependency Injection —Å Hilt
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏

### –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

- üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API endpoints (—Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∑–∞–¥–∞—á–∏, workspace)
- üîÑ Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ WebSocket
- üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
- üîÑ Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## API Endpoints

–í—Å–µ API endpoints –æ–ø–∏—Å–∞–Ω—ã –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
- `../web/routes/api.php` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ Laravel Sanctum —Ç–æ–∫–µ–Ω—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ endpoints

- `POST /api/login` - –í—Ö–æ–¥ –ø–æ email –∏ –ø–∞—Ä–æ–ª—é
- `POST /api/login-by-code` - –í—Ö–æ–¥ –ø–æ –∫–æ–¥—É
- `POST /api/sign-up` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /api/logout` - –í—ã—Ö–æ–¥
- `GET /api/page/{uuid}` - –ü–æ–ª—É—á–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
- `GET /api/workspaces` - –°–ø–∏—Å–æ–∫ workspace
- –ò –¥—Ä—É–≥–∏–µ...

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### MVVM (Model-View-ViewModel)

- **Model**: –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (`User`, `AuthResponse`, –∏ —Ç.–¥.)
- **View**: Jetpack Compose Views (`LoginView`, `HomeView`, –∏ —Ç.–¥.)
- **ViewModel**: –ö–ª–∞—Å—Å—ã, —É–ø—Ä–∞–≤–ª—è—é—â–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º (`AuthViewModel`)

### –°–µ—Ç–µ–≤–æ–π —Å–ª–æ–π

- `ApiService`: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Retrofit –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- `RetrofitModule`: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Retrofit –∏ OkHttp
- `AuthInterceptor`: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –∑–∞–ø—Ä–æ—Å—ã
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

### –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

- `TokenManager`: –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ DataStore

## –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ü–≤–µ—Ç–æ–≤—É—é —Å—Ö–µ–º—É –∏–∑ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
- **Primary**: `#0275DE` (—Å–∏–Ω–∏–π)
- **Background Light**: `#EAEEF9`
- **Background Dark**: `#252732`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º–Ω–æ–π/—Å–≤–µ—Ç–ª–æ–π —Ç–µ–º—ã —á–µ—Ä–µ–∑ Material Design 3

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤

1. –°–æ–∑–¥–∞–π—Ç–µ View –≤ `ui/views/`
2. –°–æ–∑–¥–∞–π—Ç–µ ViewModel –≤ `ui/viewmodel/` (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω)
3. –î–æ–±–∞–≤—å—Ç–µ –Ω–∞–≤–∏–≥–∞—Ü–∏—é –≤ `ui/navigation/AppNavigation.kt`

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö API endpoints

1. –î–æ–±–∞–≤—å—Ç–µ –º–µ—Ç–æ–¥ –≤ `data/remote/ApiService.kt`
2. –î–æ–±–∞–≤—å—Ç–µ –º–µ—Ç–æ–¥ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π Repository
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ ViewModel —á–µ—Ä–µ–∑ Repository

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç–º—É–ª—è—Ç–æ—Ä –∏–ª–∏ —Ä–µ–∞–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
- –í–µ–±-—Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
- API endpoint –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –¢–æ–∫–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

- –î–ª—è —Ä–∞–±–æ—Ç—ã —Å localhost –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å IP –∞–¥—Ä–µ—Å Mac –≤ `build.gradle`
- –ò–∫–æ–Ω–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ `res/mipmap-*` –ø–∞–ø–∫–∏

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API endpoints –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü
2. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞–¥–∞—á–∞–º–∏ (Kanban, List)
3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ WebSocket –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
4. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
5. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## –°—Ç–∞—Ç—É—Å

üöß –í –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

## –ê–≤—Ç–æ—Ä

–°–æ–∑–¥–∞–Ω–æ: 2025-01-24
